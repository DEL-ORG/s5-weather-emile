pipeline {
    agent any
    
    environment {
        DOCKERHUB_CREDENTIALS = credentials('dockerhub')
    }

    stages {
        stage('Build and Push Docker Image') {
            steps {
                script {
                    docker.withRegistry('https://index.docker.io/v1/', 'DOCKERHUB_CREDENTIALS') {
                        // Build and push your Docker image
                        def customImage = docker.build("devopseasylearning/s5emile-test:latest")
                        customImage.push()
                    }
                }
            }
        }
    }
    
    post {
        success {
            echo 'Pipeline executed successfully!'
        }
        failure {
            echo 'Pipeline failed!'
        }
    }
}






// pipeline {
//     agent any
//     environment {
// 		DOCKERHUB_CREDENTIALS = "docker-hub-cred"
// 	}
//     stages {
//         stage('Test Auth-Binaries') {
//          agent {
//             docker {
//               image 'golang:1.20-alpine'
//             }
//             }
//             steps {
//                 sh '''
//                 ls -l
//                 pwd
//                 '''
//             }
//         }

//         // stage('Hello2') {
//         //     steps {
//         //         sh '''
//         //         ls 
//         //         pwd
//         //         '''
//         //     }
//         // }

//         // stage('Hello3') {
//         //     steps {
//         //         sh '''
//         //         ls 
//         //         pwd
//         //         '''
//         //     }
//         // }

//         // stage('Hello4') {
//         //     steps {
//         //         sh '''
//         //         ls 
//         //         pwd
//         //         '''
//         //     }
//         // }

//         // stage('Hello') {
//         //     steps {
//         //         sh '''
//         //         ls 
//         //         pwd
//         //         '''
//         //     }
//         // }

//         // stage('Hello') {
//         //     steps {
//         //         sh '''
//         //         ls 
//         //         pwd
//         //         '''
//         //     }
//         // }

//         // stage('Hello') {
//         //     steps {
//         //         sh '''
//         //         ls 
//         //         pwd
//         //         '''
//         //     }
//         // }

//         // stage('Hello') {
//         //     steps {
//         //         sh '''
//         //         ls 
//         //         pwd
//         //         '''
//         //     }
//         // }

//         // stage('Hello') {
//         //     steps {
//         //         sh '''
//         //         ls 
//         //         pwd
//         //         '''
//         //     }
//         // }

//         // stage('Hello') {
//         //     steps {
//         //         sh '''
//         //         ls 
//         //         pwd
//         //         '''
//         //     }
//         // }

//         // stage('Hello') {
//         //     steps {
//         //         sh '''
//         //         ls 
//         //         pwd
//         //         '''
//         //     }
//         // }

//         // stage('Hello') {
//         //     steps {
//         //         sh '''
//         //         ls 
//         //         pwd
//         //         '''
//         //     }
//         // }

//         // stage('Hello') {
//         //     steps {
//         //         sh '''
//         //         ls 
//         //         pwd
//         //         '''
//         //     }
//         // }
//     }
// }


             

